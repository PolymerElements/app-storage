<!doctype html>
<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>app-storage tests</title>
  <script>
    (function () {

        if ( typeof window.CustomEvent === "function" ) return false;

        function CustomEvent ( event, params ) {
          params = params || { bubbles: false, cancelable: false, detail:  undefined };
        var evt = document.createEvent( 'CustomEvent' );
        evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
        return evt;
      }

      CustomEvent.prototype = window.Event.prototype;

      window.CustomEvent = CustomEvent;
    })();
  </script>
  <script src="../../web-component-tester/browser.js"></script>
</head>
<body>
  <script>
    var featureDetect = new Worker('feature-detect.js');

    featureDetect.onmessage = function(e) {
      if (e.data === 'pass') {
        WCT.loadSuites([
          './app-localstorage/app-localstorage-document.html?dom=shadow',
          './app-indexeddb-mirror/app-indexeddb-mirror.html?dom=shadow',
          './app-localstorage/app-localstorage-document.html?wc-shadydom=true&wc-ce=true',
          './app-indexeddb-mirror/app-indexeddb-mirror.html?wc-shadydom=true&wc-ce=true'
        ]);
      } else {
        WCT.loadSuites([
          './app-localstorage/app-localstorage-document.html?dom=shadow',
          './app-localstorage/app-localstorage-document.html?wc-shadydom=true&wc-ce=true'
        ]);
      }

      document.dispatchEvent(new CustomEvent('DOMContentLoaded'));
    }

    featureDetect.postMessage('featureDetect');
  </script>
</body>
</html>
